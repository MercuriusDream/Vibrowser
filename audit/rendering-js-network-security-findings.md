# Rendering, JS Runtime, Network, and Security Findings

## FindingRecord

| id | subsystem | scope | status | severity | criticality | evidence | spec_citation | certainty | source_wave | notes | resolution_hint |
|---|---|---|---|---|---|---|---|---|---|---|
| FJNS-01 | from_scratch | `src/html/html_parser.cpp` | Partial | High | High | `src/html/html_parser.cpp:238-508`; `audit/wave1/wave1a-from-scratch-architecture.md:1` | WHATWG HTML tree construction | High | Wave 2/3 | Parser is a simplified single-pass parser with ad-hoc handling of tags/comments/declarations; no full tokenizer state-machine plus limited recovery and insertion-mode coverage. | Complete tokenization + insertion-mode implementation and corpus-driven validation for malformed/edge-case markup. |
| FJNS-02 | from_scratch | `include/browser/html/dom.h`, `src/js/runtime.cpp` | Partial | High | High | `include/browser/html/dom.h:11-33`; `src/js/runtime.cpp:520-757`; `src/js/runtime.cpp:1155-1181` | DOM Standard | High | Wave 3 | DOM is a minimal tree and scripting API surface (`querySelector`, `getElementById`, style/text setters) without full mutation/eventTarget contracts and observer semantics. | Expand DOM host surface with create/append/remove APIs, typed Event objects, and mutation event hooks. |
| FJNS-03 | from_scratch | `src/css/css_parser.cpp`, `include/browser/css/css_parser.h` | Partial | Medium | Medium | `src/css/css_parser.cpp:1-360`; `include/browser/css/css_parser.h:1-80`; `audit/wave1/wave1a-from-scratch-architecture.md:1` | CSSOM | High | Wave 2/3 | Selector parsing and cascade handling are limited; unsupported selector/declaration branches are treated as warnings and not fully modeled against CSS grammar/cascade invariants. | Extend parser grammar and computed-style precedence checks using a conformance fixture set. |
| FJNS-04 | from_scratch | `src/layout/layout_engine.cpp`, `src/render/renderer.cpp` | Partial | Medium | Medium | `src/layout/layout_engine.cpp:151-455`; `src/render/renderer.cpp:1468-1654`; `audit/wave1/wave1a-from-scratch-architecture.md:1` | HTML/CSS paint/layout model | Medium | Wave 3 | Layout and painting are deterministic but simplified (single-pass style flow + custom paint pipeline). No full cascading invalidation/stacking/compositing model is demonstrated. | Add ordering/invalidation tests for positioned layout, overflow, transforms, compositing boundaries. |
| FJNS-05 | from_scratch | `include/browser/js/runtime.h`, `src/js/runtime.cpp` | Missing | High | High | `include/browser/js/runtime.h:43-78`; `src/js/runtime.cpp:1155-1181` | ECMAScript job scheduling | High | Wave 3/6 | There is no explicit macro-task/microtask/RAF/worker queue model; runtime execution is synchronous statement evaluation only. | Introduce explicit JS scheduling phases and ordering tests (`queueMicrotask`, Promise jobs, RAF + timer interleaving). |
| FJNS-06 | from_scratch | `src/net/http_client.cpp` | Partial | High | High | `src/net/http_client.cpp:285-317`; `src/net/http_client.cpp:887-1013`; `src/net/http_client.cpp:1146-1196`; `src/net/url.cpp:268-318` | HTTPS transport, Fetch, encoding | High | Wave 4/6 | TLS is present but certificate validation path lacks explicit chain/verification policy checks; fetch policy checks are coarse and encoding negotiation is absent. | Add certificate trust enforcement and response decoding policy with explicit failure handling. |
| FJNS-07 | from_scratch | `include/browser/net/http_client.h`, `src/net/http_client.cpp` | Partial | High | High | `include/browser/net/http_client.h:31-125`; `src/net/http_client.cpp:1146-1196`; `src/net/http_client.cpp:515-560` | CSP / SOP / CORS | High | Wave 4/6 | CSP header evaluation and CORS preflight/response filtering are not implemented; policy checks are currently request-attribute-level only. | Implement CSP/CORS policy parsing and refusal paths (including blocked response body/header exposure). |
| FJNS-08 | from_scratch | `include/browser/net/url.h`, `src/net/url.cpp` | Missing | Medium | Medium | `include/browser/net/url.h:1-22`; `src/net/url.cpp:268-318`; `audit/wave0/file-census.md:1` | Encoding Standard | Medium | Wave 4/6 | No TextDecoder/TextEncoder APIs or robust negotiation pipeline for HTTP charset/meta BOM selection are implemented. | Add encoding negotiation and decoder APIs with header/meta/BOM-driven selection. |
| FJNS-09 | clever | `clever/src/html/tree_builder.cpp` | Partial | Medium | Medium | `clever/src/html/tree_builder.cpp:295-788`; `audit/wave1/wave1b-clever-architecture.md:1` | WHATWG HTML tree construction | Medium | Wave 3 | Tree construction is implemented with a dedicated tokenizer/tree-builder, but simplified insertion/foster/adoption behavior leaves key malformed-markup paths unimplemented. | Expand insertion-mode matrix and add HTML parser corpus for mis-nesting and foreign-content cases. |
| FJNS-10 | clever | `clever/src/js/js_dom_bindings.cpp` | Partial | Medium | Medium | `clever/src/js/js_dom_bindings.cpp:1001-1381`; `clever/src/js/js_dom_bindings.cpp:5205-5387`; `clever/src/js/js_dom_bindings.cpp:1246-1318` | DOM + Event binding | Medium | Wave 3/6 | DOM binding provides query/attrs/listeners, but selector scope is limited and mutation event/integration breadth is partial. | Expand DOM API to cover additional selectors, observers, and mutation/animation event behavior. |
| FJNS-11 | clever | `clever/src/js/js_fetch_bindings.cpp`, `clever/src/net/request.cpp` | Partial | High | High | `clever/src/js/js_fetch_bindings.cpp:135-205`; `clever/src/net/request.cpp:37-94` | CORS / SOP | High | Wave 4/6 | Cross-origin XHR path bypasses explicit CORS preflight/Origin enforcement; responses are exposed without full cross-origin gate checks. | Implement origin header emission + CORS response validation and same-origin policy handling in fetch binding. |
| FJNS-12 | clever | `clever/src/net/cookie_jar.cpp` | Partial | Medium | High | `clever/src/net/cookie_jar.cpp:31-139` | Cookies / SameSite | High | Wave 4/6 | `SameSite` attribute is parsed but not enforced at `get_cookie_header` dispatch path, creating CSRF-related leakage risk. | Enforce SameSite context checks (`Strict`/`Lax`) before attaching cookies. |
| FJNS-13 | clever | `clever/src/net/http_client.cpp` | Partial | Medium | Medium | `clever/src/net/http_client.cpp:58-75`; `clever/src/net/http_client.cpp:637-675` | HTTP cache policy | Medium | Wave 4/6 | Cache-control metadata (`private`) is parsed but not consistently respected during storage/reuse. | Respect `Cache-Control: private` as non-shared-only cache policy. |
| FJNS-14 | clever | `clever/src/js/js_timers.cpp`, `clever/src/js/js_window.cpp` | Partial | High | High | `clever/src/js/js_timers.cpp:50-125`; `clever/src/js/js_window.cpp:228-301`; `clever/src/paint/render_pipeline.cpp:10958-11024` | JS scheduling pipeline | High | Wave 3/6 | Timer and RAF callbacks are drained during explicit render loops rather than as an autonomous event-loop scheduler, so ordering across tasks is partial. | Introduce canonical frame/event loop pump and queue semantics (macrotask + microtask + RAF). |
| FJNS-15 | shared | `_bmad-output/planning-artifacts/implementation-readiness-report-2026-02-23.md` | Partial | Medium | Medium | `_bmad-output/planning-artifacts/implementation-readiness-report-2026-02-23.md:1` | Program readiness | Medium | Wave 6 | Readiness artifacts confirm staged strategy; current technical posture remains constrained and suitable for educational path first. | Continue staged gate closure through Stage 2/3 criteria before broader browser-grade claims. |

## Compliance-critical deviations

1. HTML parser/tree-construction gaps (from_scratch + clever) remain high-impact for malformed markup and recovery ordering.
2. DOM/event model is partial in both engines, especially mutation/insertion APIs and event dispatch semantics.
3. JS scheduling (microtask/RAF/timers/workers) is not standards-compliant and affects render/network event ordering.
4. Network policy surface is structurally present but incomplete: TLS verification, CORS preflight, CSP enforcement, cookie/context constraints, and cache correctness remain open.
5. Wave6 adversarial validation reviewed all high-severity rows and did not find evidence that contradicts the partial/missing assessments above.
